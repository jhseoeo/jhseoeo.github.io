import{S as V,i as j,s as F,e as U,c as _,a as A,d as M,b as p,U as G,V as W,n as C,w as k,W as K}from"./index-679fa80e.js";const N="Please consider reporting this error at https://github.com/laymonage/giscus/issues/new.";function h(s){return`[giscus] An error occurred. Error message: "${s}".`}function q(s){const n=document.querySelector(`meta[property='og:${s}'],meta[name='${s}']`);return n?n.content:""}function Q(){const s=document.getElementById("giscus-css")||document.createElement("style");s.id="giscus-css",s.textContent=`
    .giscus, .giscus-frame {
      width: 100%;
    }
    .giscus-frame {
      border: none;
      color-scheme: normal;
    }
  `,document.head.prepend(s)}function T(s){let n,t,l;return{c(){n=U("div"),t=U("iframe"),this.h()},l(i){n=_(i,"DIV",{class:!0});var o=A(n);t=_(o,"IFRAME",{class:!0,title:!0,scrolling:!0,src:!0}),A(t).forEach(M),o.forEach(M),this.h()},h(){p(t,"class","giscus-frame"),p(t,"title","Comments"),p(t,"scrolling","no"),t.src!==(l=s[1])&&p(t,"src",l),p(n,"class","giscus")},m(i,o){G(i,n,o),W(n,t),s[14](t)},p(i,[o]){2&o&&t.src!==(l=i[1])&&p(t,"src",l)},i:C,o:C,d(i){i&&M(n),s[14](null)}}}function X(s,n,t){let l,i,{repo:o}=n,{repoId:f}=n,{category:b=""}=n,{categoryId:y=""}=n,{mapping:I}=n,{term:$=""}=n,{lang:w="en"}=n,{theme:E="light"}=n,{reactionsEnabled:S="1"}=n,{emitMetadata:v="0"}=n,{inputPosition:P="bottom"}=n,r="";return k(()=>{const e=location.href,u=new URL(e),g=localStorage.getItem("giscus-session");if(t(13,r=u.searchParams.get("giscus")||""),r)localStorage.setItem("giscus-session",JSON.stringify(r)),u.searchParams.delete("giscus"),history.replaceState(void 0,document.title,u.toString());else if(g)try{t(13,r=JSON.parse(g||"")||"")}catch(m){t(13,r=""),localStorage.removeItem("giscus-session"),console.warn(`${h(m==null?void 0:m.message)} Session has been cleared.`)}}),k(Q),k(()=>{const e=function(u,g=null){return function(m){if(m.origin!=="https://giscus.app")return;const{data:c}=m;if(typeof c!="object"||!c.giscus||(g&&c.giscus.resizeHeight&&(g.style.height=`${c.giscus.resizeHeight}px`),!c.giscus.error))return;const a=c.giscus.error;if(a.includes("Bad credentials")||a.includes("Invalid state value")){if(localStorage.getItem("giscus-session")!==null)return localStorage.removeItem("giscus-session"),u(),void console.warn(`${h(a)} Session has been cleared.`);console.error(`${h(a)} No session is stored initially. ${N}`)}a.includes("Discussion not found")?console.warn(`[giscus] ${a}. A new discussion will be created if a comment/reaction is submitted.`):console.error(`${h(a)} ${N}`)}}(()=>t(13,r=""),i);return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),s.$$set=e=>{"repo"in e&&t(2,o=e.repo),"repoId"in e&&t(3,f=e.repoId),"category"in e&&t(4,b=e.category),"categoryId"in e&&t(5,y=e.categoryId),"mapping"in e&&t(6,I=e.mapping),"term"in e&&t(7,$=e.term),"lang"in e&&t(8,w=e.lang),"theme"in e&&t(9,E=e.theme),"reactionsEnabled"in e&&t(10,S=e.reactionsEnabled),"emitMetadata"in e&&t(11,v=e.emitMetadata),"inputPosition"in e&&t(12,P=e.inputPosition)},s.$$.update=()=>{16380&s.$$.dirty&&t(1,l=function({repo:e,repoId:u,category:g="",categoryId:m="",mapping:c,term:a="",theme:z="light",reactionsEnabled:B="1",emitMetadata:D="0",inputPosition:H="bottom",lang:J="en",session:O,origin:x}){const L=new URL(location.href);L.searchParams.delete("giscus");const R=L.toString(),d={origin:x=x||R,session:O,theme:z,reactionsEnabled:B,emitMetadata:D,inputPosition:H,repo:e,repoId:u,category:g,categoryId:m,description:q("description")};switch(c){case"url":d.term=R;break;case"title":d.term=document.title;break;case"og:title":d.term=q("title");break;case"specific":d.term=a;break;case"number":d.number=a;break;case"pathname":default:d.term=location.pathname.length<2?"index":location.pathname.substring(1).replace(/\.\w+$/,"")}return`https://giscus.app/${J}/widget?${new URLSearchParams(d)}`}({repo:o,repoId:f,category:b,categoryId:y,mapping:I,term:$,lang:w,theme:E,reactionsEnabled:S,emitMetadata:v,inputPosition:P,session:r}))},[i,l,o,f,b,y,I,$,w,E,S,v,P,r,function(e){K[e?"unshift":"push"](()=>{i=e,t(0,i)})}]}class Z extends V{constructor(n){super(),j(this,n,X,T,F,{repo:2,repoId:3,category:4,categoryId:5,mapping:6,term:7,lang:8,theme:9,reactionsEnabled:10,emitMetadata:11,inputPosition:12})}}export{Z as Giscus};
