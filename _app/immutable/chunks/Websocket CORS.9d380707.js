import{S as Ns,i as Is,s as Bs,k as p,q as r,a as c,l as e,m as l,r as f,h as n,c as i,n as u,b as t,E as o,M as fs}from"./index.d78780bf.js";/* empty css                                               */function Fs(vs){let E,$,B,C,ms=`<code class="language-go">app <span class="token operator">:=</span> fiber<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
app<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>cors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>cors<span class="token punctuation">.</span>ConfigDefault<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
app<span class="token punctuation">.</span><span class="token function">Listen</span><span class="token punctuation">(</span><span class="token string">":3000"</span><span class="token punctuation">)</span></code>`,F,v,g,W,U,G,d,k,R,ss,ns,D,as,ts,M,m,ps,h,w,es,q,T,ws=`<code class="language-go">app <span class="token operator">:=</span> fiber<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
app<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span>cors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span>cors<span class="token punctuation">.</span>Config<span class="token punctuation">&#123;</span>
    AllowOrigins<span class="token punctuation">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span>
    AllowMethods<span class="token punctuation">:</span> <span class="token string">"GET,POST,HEAD,PUT,DELETE,PATCH,OPTIONS"</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
app<span class="token punctuation">.</span><span class="token function">Listen</span><span class="token punctuation">(</span><span class="token string">":3000"</span><span class="token punctuation">)</span></code>`,y,H,os,z,b,Hs=`<code class="language-go">app<span class="token punctuation">.</span><span class="token function">Use</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>c <span class="token operator">*</span>fiber<span class="token punctuation">.</span>Ctx<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">&#123;</span>
    c<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Origin"</span><span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span>
    c<span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Access-Control-Allow-Methods"</span><span class="token punctuation">,</span> <span class="token string">"GET,POST,HEAD,PUT,DELETE,PATCH,OPTIONS"</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> c<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code>`,Z,j,J,K,S,O,x,ls,Q,V,X,P,L,_,cs,is,N,A,us;return{c(){E=p("p"),$=r("Fiber 프레임워크를 사용하는 경우 CORS를 적용하려면 일반적으로 다음과 같이 하면 된다."),B=c(),C=p("pre"),F=c(),v=p("p"),g=r(`이렇게 cors 미들웨어를 사용하면 다른 Origin에서 날린 요청도 받아줄 수 있다.
보통의 REST API라면 이걸로 CORS 요청을 받아서 처리하는 게 가능하지만, WebSocket의 경우는 다르다.`),W=c(),U=p("br"),G=p("br"),d=c(),k=p("p"),R=p("a"),ss=r("Fiber CORS 미들웨어 문서"),ns=r("를 보면, 기본 CORS 설정 사용시 "),D=p("code"),as=r("GET,POST,HEAD,PUT,DELETE,PATCH"),ts=r(" 메서드에 대해서만 CORS가 적용된다."),M=c(),m=p("p"),ps=r(`GET, POST 요청 같은 단순 요청(Simple Requests)은 CORS Preflight 요청을 보내지 않고 바로 요청을 보낸다.
그러나 WebSocket의 경우 Preflight 요청을 보내며, Preflight 요청의 메서드는 OPTIONS이다.
따라서 OPTIONS 메서드에 대해서도 CORS를 적용해주어야 한다.`),h=c(),w=p("p"),es=r("Fiber에서는 다음과 같이 CORS 설정을 변경할 수 있다."),q=c(),T=p("pre"),y=c(),H=p("p"),os=r("만약 미들웨어를 사용하지 않고 직접 CORS를 적용하고 싶다면 다음과 같이 하면 된다."),z=c(),b=p("pre"),Z=c(),j=p("br"),J=p("br"),K=c(),S=p("h2"),O=p("a"),x=p("span"),ls=r("References"),Q=c(),V=p("hr"),X=c(),P=p("ul"),L=p("li"),_=p("a"),cs=r("Fiber CORS"),is=c(),N=p("li"),A=p("a"),us=r("CORS Preflight"),this.h()},l(s){E=e(s,"P",{});var a=l(E);$=f(a,"Fiber 프레임워크를 사용하는 경우 CORS를 적용하려면 일반적으로 다음과 같이 하면 된다."),a.forEach(n),B=i(s),C=e(s,"PRE",{class:!0});var Ds=l(C);Ds.forEach(n),F=i(s),v=e(s,"P",{});var ks=l(v);g=f(ks,`이렇게 cors 미들웨어를 사용하면 다른 Origin에서 날린 요청도 받아줄 수 있다.
보통의 REST API라면 이걸로 CORS 요청을 받아서 처리하는 게 가능하지만, WebSocket의 경우는 다르다.`),ks.forEach(n),W=i(s),U=e(s,"BR",{}),G=e(s,"BR",{}),d=i(s),k=e(s,"P",{});var I=l(k);R=e(I,"A",{href:!0,rel:!0});var Es=l(R);ss=f(Es,"Fiber CORS 미들웨어 문서"),Es.forEach(n),ns=f(I,"를 보면, 기본 CORS 설정 사용시 "),D=e(I,"CODE",{});var Ss=l(D);as=f(Ss,"GET,POST,HEAD,PUT,DELETE,PATCH"),Ss.forEach(n),ts=f(I," 메서드에 대해서만 CORS가 적용된다."),I.forEach(n),M=i(s),m=e(s,"P",{});var Os=l(m);ps=f(Os,`GET, POST 요청 같은 단순 요청(Simple Requests)은 CORS Preflight 요청을 보내지 않고 바로 요청을 보낸다.
그러나 WebSocket의 경우 Preflight 요청을 보내며, Preflight 요청의 메서드는 OPTIONS이다.
따라서 OPTIONS 메서드에 대해서도 CORS를 적용해주어야 한다.`),Os.forEach(n),h=i(s),w=e(s,"P",{});var Ps=l(w);es=f(Ps,"Fiber에서는 다음과 같이 CORS 설정을 변경할 수 있다."),Ps.forEach(n),q=i(s),T=e(s,"PRE",{class:!0});var xs=l(T);xs.forEach(n),y=i(s),H=e(s,"P",{});var Cs=l(H);os=f(Cs,"만약 미들웨어를 사용하지 않고 직접 CORS를 적용하고 싶다면 다음과 같이 하면 된다."),Cs.forEach(n),z=i(s),b=e(s,"PRE",{class:!0});var Ls=l(b);Ls.forEach(n),Z=i(s),j=e(s,"BR",{}),J=e(s,"BR",{}),K=i(s),S=e(s,"H2",{id:!0});var rs=l(S);O=e(rs,"A",{"aria-hidden":!0,tabindex:!0,href:!0});var Rs=l(O);x=e(Rs,"SPAN",{class:!0}),l(x).forEach(n),Rs.forEach(n),ls=f(rs,"References"),rs.forEach(n),Q=i(s),V=e(s,"HR",{}),X=i(s),P=e(s,"UL",{});var Y=l(P);L=e(Y,"LI",{});var Ts=l(L);_=e(Ts,"A",{href:!0,rel:!0});var bs=l(_);cs=f(bs,"Fiber CORS"),bs.forEach(n),Ts.forEach(n),is=i(Y),N=e(Y,"LI",{});var _s=l(N);A=e(_s,"A",{href:!0,rel:!0});var As=l(A);us=f(As,"CORS Preflight"),As.forEach(n),_s.forEach(n),Y.forEach(n),this.h()},h(){u(C,"class","language-go"),u(R,"href","https://docs.gofiber.io/api/middleware/cors/"),u(R,"rel","nofollow"),u(T,"class","language-go"),u(b,"class","language-go"),u(x,"class","icon icon-link"),u(O,"aria-hidden","true"),u(O,"tabindex","-1"),u(O,"href","#references"),u(S,"id","references"),u(_,"href","https://docs.gofiber.io/api/middleware/cors/"),u(_,"rel","nofollow"),u(A,"href","https://developer.mozilla.org/ko/docs/Web/HTTP/CORS#%EA%B8%B0%EB%8A%A5%EC%A0%81_%EA%B0%9C%EC%9A%94"),u(A,"rel","nofollow")},m(s,a){t(s,E,a),o(E,$),t(s,B,a),t(s,C,a),C.innerHTML=ms,t(s,F,a),t(s,v,a),o(v,g),t(s,W,a),t(s,U,a),t(s,G,a),t(s,d,a),t(s,k,a),o(k,R),o(R,ss),o(k,ns),o(k,D),o(D,as),o(k,ts),t(s,M,a),t(s,m,a),o(m,ps),t(s,h,a),t(s,w,a),o(w,es),t(s,q,a),t(s,T,a),T.innerHTML=ws,t(s,y,a),t(s,H,a),o(H,os),t(s,z,a),t(s,b,a),b.innerHTML=Hs,t(s,Z,a),t(s,j,a),t(s,J,a),t(s,K,a),t(s,S,a),o(S,O),o(O,x),o(S,ls),t(s,Q,a),t(s,V,a),t(s,X,a),t(s,P,a),o(P,L),o(L,_),o(_,cs),o(P,is),o(P,N),o(N,A),o(A,us)},p:fs,i:fs,o:fs,d(s){s&&n(E),s&&n(B),s&&n(C),s&&n(F),s&&n(v),s&&n(W),s&&n(U),s&&n(G),s&&n(d),s&&n(k),s&&n(M),s&&n(m),s&&n(h),s&&n(w),s&&n(q),s&&n(T),s&&n(y),s&&n(H),s&&n(z),s&&n(b),s&&n(Z),s&&n(j),s&&n(J),s&&n(K),s&&n(S),s&&n(Q),s&&n(V),s&&n(X),s&&n(P)}}}const Gs={title:"WebSocket에 CORS를 적용하려면",date:"2023-11-13T00:00:00.000Z",excerpt:"???: 내 웹소켓은 부끄럼쟁이인가봐요",categories:["Golang","Fiber","Websocket","CORS"],coverImage:"/post_img/Backend/Architecture/DDD/cover.png",coverWidth:16,coverHeight:9,indexed:!0,exposed:!0};class ds extends Ns{constructor(E){super(),Is(this,E,null,Fs,Bs,{})}}export{ds as default,Gs as metadata};
