{"type":"data","nodes":[null,{"type":"data","data":[{"PostContent":1,"meta":2},"\u003Cbr\u003E\n\u003Cp\u003E본 글은 Golang을 공부하며 주요 내용이라 생각되는 것들을 기록해둔 자료이며, Ubuntu 22.04 LTS 기준으로 작성되었습니다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch2 id=\"introduction\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#introduction\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EIntroduction\u003C\u002Fh2\u003E\n\u003Chr\u003E\n\u003Cp\u003EGo의 표준 라이브러리는 여러 장점이 있다.\nPython의 라이브러리 철학인 \u003Cem\u003E“batteries included”\u003C\u002Fem\u003E 처럼, 서비스를 빌드하기 위해 필요한 다양한 도구를 제공한다.\nGo는 비교적 최신 언어인 만큼, 현대 프로그래밍 환경에서 직면하는 문제에 초점을 맞춘 라이브러리를 제공한다.\u003C\u002Fp\u003E\n\u003Cp\u003E이 장에서 모든 표준 라이브러리 패키지들을 다룰 수 없고, 그럴 필요도 없다.\n표준 라이브러리에 대한 다양한 정보들과 \u003Ca href=\"https:\u002F\u002Fpkg.go.dev\u002Fstd\" rel=\"nofollow\"\u003E문서\u003C\u002Fa\u003E가 있으니, 여기를 참조하면 될 것이다.\n이 포스트에서는 몇 개의 가장 중요한 패키지, 그리고 이들의 디자인적인 측면이나 사용 방법을 알아볼 것이다.\n\u003Ccode\u003Eerrors\u003C\u002Fcode\u003E, \u003Ccode\u003Esync\u003C\u002Fcode\u003E, \u003Ccode\u003Econtext\u003C\u002Fcode\u003E, \u003Ccode\u003Etesting\u003C\u002Fcode\u003E, \u003Ccode\u003Ereflect\u003C\u002Fcode\u003E, \u003Ccode\u003Eunsafe\u003C\u002Fcode\u003E 등 패키지들은 각각의 챕터에서 집중적으로 다루었거나 다룰 예정이다.\n이 챕터에서는 I\u002FO, 시간, JSON, HTTP 등을 지원하는 패키지에 대해 알아볼 것이다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch2 id=\"io-and-friends\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#io-and-friends\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Eio and Friends\u003C\u002Fh2\u003E\n\u003Chr\u003E\n\u003Cp\u003E실용적인 프로그램을 데이터를 읽고 쓸 수 있어야 한다.\nGo의 입\u002F출력 철학은 \u003Ccode\u003Eio\u003C\u002Fcode\u003E 패키지에서 찾아볼 수 있다.\n특히 이 패키지에 정의된 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E와 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E는 각각 Go에서 두 번째, 세 번째로 많이 사용되는 인터페이스일 것이다. (첫 번째는 \u003Ccode\u003Eerror\u003C\u002Fcode\u003E이다)\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E\u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E와 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E는 모두 한 개의 메소드를 정의한다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Reader \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003ERead\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ep \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003En \u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Writer \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ep \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003En \u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E의 \u003Ccode\u003EWrite()\u003C\u002Fcode\u003E 메소드는 바이트 덩어리를 파라미터로 받고, 바이트의 수와 에러 발생 여부를 반환한다.\n\u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E의 \u003Ccode\u003ERead()\u003C\u002Fcode\u003E 메소드는 좀 더 신기하다.\n리턴 파라미터로 값을 반환하기보다는 입력 파라미터로 보낸 값을 변경한다.\n최대 \u003Ccode\u003Elen(p)\u003C\u002Fcode\u003E 바이트만큼의 데이터가 슬라이스에 쓰일 것이고, 기록된 바이트의 수와 에러 여부가 반환된다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E사실 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E의 \u003Ccode\u003ERead()\u003C\u002Fcode\u003E 메소드는 아래와 같이 정의되는 것이 직관적일 것이다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E NotHowReaderIsDefined \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003ERead\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ep \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E하지만 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E가 기존 방식으로 정의되는 데에는 이유가 있다.\n\u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E를 사용하는 함수를 작성하여 이해해보도록 하자.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EcountLetters\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Er io\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EReader\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tbuf \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Emake\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2048\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\tout \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Emap\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tn\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E r\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ERead\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ebuf\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003E_\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E b \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erange\u003C\u002Fspan\u003E buf\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003En\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eb \u003Cspan class=\"token operator\"\u003E\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token char\"\u003E'A'\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&amp;&amp;\u003C\u002Fspan\u003E b \u003Cspan class=\"token operator\"\u003E&lt;=\u003C\u002Fspan\u003E \u003Cspan class=\"token char\"\u003E'Z'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E||\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eb \u003Cspan class=\"token operator\"\u003E\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token char\"\u003E'a'\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&amp;&amp;\u003C\u002Fspan\u003E b \u003Cspan class=\"token operator\"\u003E&lt;=\u003C\u002Fspan\u003E \u003Cspan class=\"token char\"\u003E'z'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\t\tout\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eb\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E++\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E==\u003C\u002Fspan\u003E io\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EEOF \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E out\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E위 예제에서 주목할 점들이 있다.\u003C\u002Fp\u003E\n\u003Col\u003E\u003Cli\u003E\u003Cp\u003E버퍼를 한 번 생성하고 \u003Ccode\u003Er.Read()\u003C\u002Fcode\u003E를 호출할 때마다 재사용할 것이다.\n이러한 방식을 쓰면 크기가 클 수도 있는 데이터에 대해 한 번의 메모리 할당으로 값을 읽어올 수 있다.\n만약 \u003Ccode\u003ERead()\u003C\u002Fcode\u003E 메소드가 \u003Ccode\u003E[]byte\u003C\u002Fcode\u003E를 리턴하게끔 작성되어 있다면, 매번 함수를 호출할 때마다 새롭게 메모리 할당을 할 것이고, 가비지 컬렉터가 할 일이 많아질 것이다.\u003Cbr\u003E\n추후 이렇게 낭비적인 할당을 줄이고 싶다면, 프로그램이 실행될 때 버퍼 풀을 생성해 놓는 방법도 있다.\n함수가 실행될 때 해당 버퍼 풀에서 버퍼를 가져와 사용하고, 끝나면 되돌려 놓는 식이다.\n\u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E에 slice를 보낼 수 있기 떄문에 메모리 할당을 개발자의 몫으로 남겨둘 수 있다.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003E\u003Ccode\u003Er.Read()\u003C\u002Fcode\u003E에서 반환된 \u003Ccode\u003En\u003C\u002Fcode\u003E값을 사용하여 버퍼에 바이트가 얼마나 많이 기록되었는지 확인하고,\n\u003Ccode\u003Ebuf\u003C\u002Fcode\u003E slice의 subslice를 이터레이션하여 읽어온 데이터를 처리할 수 있다.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003E\u003Ccode\u003Er.Read()\u003C\u002Fcode\u003E의 리턴 타입 중 error로 \u003Ccode\u003Eio.EOF\u003C\u002Fcode\u003E를 반환한 경우(\u003Ccode\u003Eio.EOF\u003C\u002Fcode\u003E는 실제로 에러가 아니다), 읽어올 데이터가 끝났음을 의미한다.\n위 예제에서는 \u003Ccode\u003Eio.EOF\u003C\u002Fcode\u003E가 반환될 시 처리를 끝내고 결과물을 리턴한다.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Cp\u003E\u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E에는 특이사항이 있다. 대부분의 함수 또는 메소드에 error 리턴값이 있다면, 오류가 아닌 값을 처리하기 전에 에러를 먼저 확인할 것이다.\n\u003Ccode\u003ERead()\u003C\u002Fcode\u003E를 사용할때는 데이터 스트림의 끝 또는 예기치 않은 오류가 발생하기 전에 반환된 바이트가 있을 수 있기 떄문에 이와 반대로 한다.\u003Cbr\u003E\n만약 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E가 예상치 못하게 끝난다면 다른 종류의 sentinel error(\u003Ccode\u003Eio.ErrUnexpectedEOF\u003C\u002Fcode\u003E)가 반환될 것이다.\n이처럼 예측하지 못한 상태를 나타내는 에러는 \u003Ccode\u003EErr\u003C\u002Fcode\u003E로 시작한다.\u003C\u002Fp\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\n\u003Cbr\u003E\n\u003Cp\u003E이렇듯 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E와 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E 인터페이스가 간단하기 때문에, 여러 가지 방법으로 충족시킬 수 있다.\n\u003Ccode\u003Estrings.NewReader()\u003C\u002Fcode\u003E 함수를 사용하여 문자열로부터 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E를 생성시킬 수도 있다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\ts \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"The quick brown fox jumped over the lazy dog\"\u003C\u002Fspan\u003E\n\tsr \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E strings\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewReader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Es\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\tcounts\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EcountLetters\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Esr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecounts\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003EcountLetters\u003C\u002Fcode\u003E 함수가 파라미터로 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E를 사용하므로, \u003Ccode\u003EcountLetters\u003C\u002Fcode\u003E 함수를 써서 gzip으로 압축된 영문자를 카운트할 수도 있다.\n진짜 되는지 해보자. 먼저 파일명을 파라미터로 받아 \u003Ccode\u003E*gzip.Reader\u003C\u002Fcode\u003E를 반환하는 함수를 작성해준다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EbuildGZipReader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Efilename \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Egzip\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EReader\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tr\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E os\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EOpen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Efilename\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\tgr\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E gzip\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewReader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Er\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E gr\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tgr\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EClose\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\tr\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EClose\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E함수의 구조가 그다지 어렵지는 않다.\n먼저 \u003Ccode\u003Eos.Open()\u003C\u002Fcode\u003E 함수로 \u003Ccode\u003E*os.File\u003C\u002Fcode\u003E 인스턴스를 만들고 에러 검사를 한다.\n그 후 \u003Ccode\u003Egzip.NewReader()\u003C\u002Fcode\u003E 함수를 호출하여 \u003Ccode\u003E*gzip.Reader\u003C\u002Fcode\u003E 인스턴스를 생성한다.\n리턴 값들은 \u003Ccode\u003E*gzip.Reader\u003C\u002Fcode\u003E 인스턴스, 생성된 인스턴스들을 제거하는 closure, 그리고 에러 변수이다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003E*gzip.Reader\u003C\u002Fcode\u003E 인스턴스는 \u003Ccode\u003E*strings.Reader\u003C\u002Fcode\u003E처럼 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E를 충족시키기 때문에 \u003Ccode\u003EcountLettters()\u003C\u002Fcode\u003E 함수에서 사용할 수 있다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tr\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E closer\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EbuildGZipReader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"my_data.txt.gz\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Edefer\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Ecloser\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\tcounts\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EcountLetters\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Er\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ecounts\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003E읽기\u002F쓰기를 위한 표준 인터페이스가 있기 때문에, \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E와 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E에서 데이터를 복사하는 표준 함수 \u003Ccode\u003Eio.Copy()\u003C\u002Fcode\u003E도 \u003Ccode\u003Eio\u003C\u002Fcode\u003E 패키지에 존재한다.\n기존 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E와 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E인스턴스에 새로운 기능을 추가하기 위한 다른 표준 함수들도 있다.\u003C\u002Fp\u003E\n\u003Cul\u003E\u003Cli\u003E\u003Ccode\u003Eio.MultiReader\u003C\u002Fcode\u003E : 여러 개의 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E 인스턴스로부터 잇따라 데이터를 읽을 수 있는 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E 인스턴스를 반환한다.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eio.LimitReader\u003C\u002Fcode\u003E : 명시된 수 만큼의 바이트만 읽을 수 있는 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E 인스턴스를 반환한다.\u003C\u002Fli\u003E\n\u003Cli\u003E\u003Ccode\u003Eio.MultiWriter\u003C\u002Fcode\u003E : 동시에 여러 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E에 데이터를 쓸 수 있는 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E 인스턴스를 반환한다.\u003C\u002Fli\u003E\u003C\u002Ful\u003E\n\u003Cp\u003E표준 라이브러리 내의 다른 패키지에서는 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E와 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E와 같이 사용할 수 있는 타입이나 함수들을 제공한다.\n몇 개는 이미 봤지만 압축 알고리즘, 아카이브, 암호화, 버퍼, byte slice, 문자열 등 다양하게 제공하고 있다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E\u003Ccode\u003Eio\u003C\u002Fcode\u003E 패키지에는 \u003Ccode\u003Eio.Closer\u003C\u002Fcode\u003E나 \u003Ccode\u003Eio.Seeker\u003C\u002Fcode\u003E등, 또다른 단일 메소드 인터페이스가 있다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Closer \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003EClose\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Seeker \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token function\"\u003ESeek\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eoffset \u003Cspan class=\"token builtin\"\u003Eint64\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E whence \u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eint64\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003Eos.File\u003C\u002Fcode\u003E과 같이, 읽기나 쓰기가 끝나면 정리를 해줘야 하는 타입들은 \u003Ccode\u003Eio.Closer\u003C\u002Fcode\u003E를 충족시킨다.\n일반적으로 \u003Ccode\u003EClose()\u003C\u002Fcode\u003E 메소드는 \u003Ccode\u003Edefer\u003C\u002Fcode\u003E를 통해 호출된다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Ef\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E os\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EOpen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EfileName\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Edefer\u003C\u002Fspan\u003E f\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EClose\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E만약 리소스를 반복문 내에서 여는 경우, \u003Ccode\u003Edefer\u003C\u002Fcode\u003E를 이용하지 않는 것이 좋다.\n반복문 내에서 열린 리소스는 이터레이션의 끝에서 닫아주는 게 좋겠지만, \u003Ccode\u003Edefer\u003C\u002Fcode\u003E는 함수가 끝날 때 실행된다.\n따라서 이터레이션의 끝 부분이나 함수가 끝날 수도 있는 에러가 발생할 만한 부분에 \u003Ccode\u003EClose()\u003C\u002Fcode\u003E를 호출해 주는 게 좋다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Eio.Seeker\u003C\u002Fcode\u003E 인터페이스는 리소스에 임의 접근(random access) 하기 위해 사용된다.\n이 때 파라미터 \u003Ccode\u003Ewhence\u003C\u002Fcode\u003E에 유효한 값은 상수 \u003Ccode\u003Eio.SeekStart\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.SeekCurrent\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.SeekEnd\u003C\u002Fcode\u003E이다.\n사실 이건 제작자 실수인게, \u003Ccode\u003Ewhence\u003C\u002Fcode\u003E는 타입을 새로 생성하여 명확히 해줬어야 하는데 \u003Ccode\u003Ewhence\u003C\u002Fcode\u003E는 int 타입이다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E\u003Ccode\u003Eio\u003C\u002Fcode\u003E 패키지는 앞서 보았던 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.Closer\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.Seeker\u003C\u002Fcode\u003E, 이렇게 네 개의 인터페이스를 여러 방식으로 합친 인터페이스를 정의한다.\n\u003Ccode\u003Eio.ReadCloser\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.ReadSeeker\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.ReadWriteCloser\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.ReadWriteSeeker\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.ReadWriter\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.WriteCloser\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.WriteSeeker\u003C\u002Fcode\u003E 등이 있다.\n이런 인터페이스들은 함수가 데이터에 대해 어떤 프로세스를 하는지 정확히 명시하기 위해 사용된다.\u003C\u002Fp\u003E\n\u003Cp\u003E이를테면 파라미터의 타입으로 \u003Ccode\u003Eos.File\u003C\u002Fcode\u003E를 써주는 것보다는, 그 파라미터를 가지고 뭘 할건지 명시하기 위헤 인터페이스를 사용하는 것이 좋다.\n또한 자체 데이터 소스나 싱크를 작성하는 경우, 코드가 이러한 인터페이스와 호환되도록 하는 것이 좋다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Eioutil\u003C\u002Fcode\u003E 패키지는 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E 인스턴스에 대한 다양한 도구들을 제공한다.\nbyte slice로 한 번에 읽기, 파일 읽기 및 쓰기, 임시 파일 작업 등 보다 간단한 도구들이 포함된다.\n이를테면 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E, \u003Ccode\u003Ebufio.Scanner\u003C\u002Fcode\u003E 등은 크기가 큰 데이터를 처리하는데 용이한 편이지만,\n\u003Ccode\u003Eioutil.ReadAll\u003C\u002Fcode\u003E, \u003Ccode\u003Eioutil.ReadFile\u003C\u002Fcode\u003E, \u003Ccode\u003Eioutil.WriteFile\u003C\u002Fcode\u003E은 보다 작은 데이터를 처리하는데 유용하다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Eioutil\u003C\u002Fcode\u003E 패키지에는 유용한 함수들이 더 있다.\n가령 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E는 충족하지만 \u003Ccode\u003Eio.Closer\u003C\u002Fcode\u003E는 충족하지 않는 인스턴스(\u003Ccode\u003Estrings.Reader\u003C\u002Fcode\u003E 등)가 있고,\n이를 \u003Ccode\u003Eio.ReadCloser\u003C\u002Fcode\u003E를 파라미터로 받는 함수에 넘겨야 한다고 가정해보자.\n이 때 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E를 \u003Ccode\u003Eioutil.NopCloser()\u003C\u002Fcode\u003E 함수로 보내면 \u003Ccode\u003Eio.ReadCloser()\u003C\u002Fcode\u003E 타입을 반환할 것이고, 이걸 해당 함수의 파라미터로 넘기면 된다.\u003C\u002Fp\u003E\n\u003Cp\u003E실제로 \u003Ccode\u003Eioutil.NopCloser()\u003C\u002Fcode\u003E의 구현을 들여다보면 생각보다 단순하다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E nopCloser \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    io\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EReader\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EnopCloser\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EClose\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ENopCloser\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Er io\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EReader\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E io\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EReadCloser \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E nopCloser\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Er\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E위 구현을 보면 Go에서 타입에 메소드를 추가하는 패턴을 확인할 수 있다.\n인터페이스를 충족할 수 있게끔 타입에 메소드를 추가해주고 싶다면, 이렇게 Embedded type 패턴을 사용해주면 된다.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003E함수에서 인터페이스를 리턴하지 않는다는 규칙이 기억날 것이다.\n\u003Ccode\u003Eioutil.NopCloser()\u003C\u002Fcode\u003E 함수는 이를 위반하긴 한다.\n하지만 표준 라이브러리에 속하는 인터페이스끼리의 변환을 해주는 간단한 어댑터 역할만 하기 때문에 예외로 두고 넘어가 주자.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch2 id=\"time\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#time\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Etime\u003C\u002Fh2\u003E\n\u003Chr\u003E\n\u003Cp\u003E다른 언어들처럼 Go에도 시간 연산을 하는 라이브러리인 \u003Ccode\u003Etime\u003C\u002Fcode\u003E 패키지가 있다.\n시간을 나타내는 주요 타입이 두 가지 있는데, 바로 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E과 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E이다.\u003C\u002Fp\u003E\n\u003Cp\u003E시각 사이의 시간은 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E으로 표현되며, 이는 \u003Ccode\u003Eint64\u003C\u002Fcode\u003E 기반이다.\nGo의 시간 최소단위는 나노초(ns)이고, \u003Ccode\u003Etime\u003C\u002Fcode\u003E 패키지에서는 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E 타입의\n나노초(nanosecond), 마이크로초(microsecond), 밀리초(milisecond), 초(second), 분(minute), 시간(hour) 상수를 정의한다.\u003C\u002Fp\u003E\n\u003Cp\u003E예를 들어, 2시간 30분은 아래와 같이 정의한다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Ed \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Etime\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHour \u003Cspan class=\"token operator\"\u003E+\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E30\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Etime\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EMinute\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E이러한 상수들을 사용하면 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E 타입을 readable하고 type-safe하게 만들어준다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003EGo는 \u003Ccode\u003Etime,ParseDuration()\u003C\u002Fcode\u003E 함수에 특정한 스트링 포맷이나 숫자들의 배열을 넘겨서 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E 타입으로 파싱할 수 있다.\n이에 대한 설명은 \u003Ca href=\"https:\u002F\u002Fpkg.go.dev\u002Ftime#ParseDuration\" rel=\"nofollow\"\u003E표준 라이브러리 문서\u003C\u002Fa\u003E에 작성되어 있다.\n아래 내용은 원문인데, 번역하는 것보다 영어로 읽는게 더 편할것 같아서 따로 번역하지는 않았다.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003EA duration string is a possibly signed sequence of decimal numbers,\neach with optional fraction and a unit suffix, such as “300ms”, “-1.5h” or “2h45m”.\nValid time units are “ns”, “us” (or “µs”), “ms”, “s”, “m”, “h”.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cp\u003E\u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E에는 여러 가지 메소드들이 정의되어 있고, \u003Ccode\u003Efmt.Stringer\u003C\u002Fcode\u003E 인터페이스를 충족시킨다.\n따라서 \u003Ccode\u003Efmt.Stringer\u003C\u002Fcode\u003E에 정의된 \u003Ccode\u003EString()\u003C\u002Fcode\u003E 메소드를 호출하면 formatted string을 반환받는다.\n또한 \u003Ccode\u003ETruncate\u003C\u002Fcode\u003E나 \u003Ccode\u003ERound\u003C\u002Fcode\u003E 메소드를 쓰면 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E을 지정된 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E 단위만큼 반올림하거나 자른다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E특정한 시각의 경우 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 타입으로 표현되는데, 시간대(time zone)를 명시해 주어야 한다.\n또한 \u003Ccode\u003ETime.Now()\u003C\u002Fcode\u003E 함수로 현재 로컬 시간인 \u003Ccode\u003Etime.Time()\u003C\u002Fcode\u003E 인스턴스를 얻을 수 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 인스턴스는 시간대에 대한 정보까지 포함하기 때문에,\n두 개의 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 인스턴스가 같은 시간대를 나타내더라도 \u003Ccode\u003E==\u003C\u002Fcode\u003E 연산자를 사용하면 제대로 된 결과가 나타나지 않을 수 있다.\n\u003Ccode\u003EEqual()\u003C\u002Fcode\u003E 메소드를 사용하면, 표준 시간대를 기준으로 비교해준다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Etime.Parse()\u003C\u002Fcode\u003E 함수는 \u003Ccode\u003Estring\u003C\u002Fcode\u003E을 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 타입으로 변환해주고, \u003Ccode\u003EFormat()\u003C\u002Fcode\u003E 메소드는 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 타입을 \u003Ccode\u003Estring\u003C\u002Fcode\u003E으로 변환해준다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Et\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EParse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"2006-02-01 15:04:05 -0700\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Et\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EFormat\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"January 2, 2006 at 3:04:05PM MST\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E출력 결과는 다음과 같다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-bash\"\u003EMarch \u003Cspan class=\"token number\"\u003E13\u003C\u002Fspan\u003E, \u003Cspan class=\"token number\"\u003E2016\u003C\u002Fspan\u003E at \u003Cspan class=\"token number\"\u003E12\u003C\u002Fspan\u003E:00:00AM +0000\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E이러한 날짜나 시간 포맷은 유용하게 사용되게끔 의도되었지만, 기억하기 힘들기 때문에 사용하려 할 때마다 찾아봐야 한다는 단점이 있다.\n다행히도 주로 사용되는 날짜 및 시각 포맷은 \u003Ccode\u003Etime\u003C\u002Fcode\u003E 패키지에서 상수로 주어진다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E처럼, \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E에도 \u003Ccode\u003EDay\u003C\u002Fcode\u003E, \u003Ccode\u003EMonth\u003C\u002Fcode\u003E, \u003Ccode\u003EYear\u003C\u002Fcode\u003E, \u003Ccode\u003EHour\u003C\u002Fcode\u003E, \u003Ccode\u003EMinute\u003C\u002Fcode\u003E, \u003Ccode\u003ESecond\u003C\u002Fcode\u003E, \u003Ccode\u003EWeekday\u003C\u002Fcode\u003E, \u003Ccode\u003EClock\u003C\u002Fcode\u003E 등 시각의 일부분을 추출할 수 있는 메소드가 존재한다.\n이 중 \u003Ccode\u003EClock()\u003C\u002Fcode\u003E 메소드는 시, 분, 초를 각각의 \u003Ccode\u003Eint\u003C\u002Fcode\u003E로 반환하고, \u003Ccode\u003EDate()\u003C\u002Fcode\u003E는 연, 월, 일을 각각의 \u003Ccode\u003Eint\u003C\u002Fcode\u003E로 반환한다.\n또한 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 인스턴스는 \u003Ccode\u003EAfter\u003C\u002Fcode\u003E, \u003Ccode\u003EBefore\u003C\u002Fcode\u003E, \u003Ccode\u003EEqual\u003C\u002Fcode\u003E 메소드를 통해 다른 인스턴스와 비교할 수 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E의 \u003Ccode\u003ESub()\u003C\u002Fcode\u003E 메소드는 두 시각 사이의 경과 시간을 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E으로 반환하며,\n\u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E의 \u003Ccode\u003EAdd()\u003C\u002Fcode\u003E 메소드는 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E을 파라미터로 받아 해당 시간만큼 더해진 시각의 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 인스턴스를 반환한다.\n\u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E의 \u003Ccode\u003EAddDate()\u003C\u002Fcode\u003E 메소드는 연, 월, 일을 각각 입력받아 그만큼 더해진 날짜의 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 인스턴스를 반환한다.\n\u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E 인스턴스를 인자로 주고, 앞서 언급한 \u003Ccode\u003ETruncate()\u003C\u002Fcode\u003E와 \u003Ccode\u003ERound()\u003C\u002Fcode\u003E 메소드를 사용할 수도 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E이러한 메소드들은 모두 \u003Cem\u003Evalue receiver\u003C\u002Fem\u003E로 정의되었기 때문에, 원래의 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 인스턴스를 변경하지 않는다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"monotonic-time\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#monotonic-time\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMonotonic Time\u003C\u002Fh3\u003E\n\u003Cp\u003E대부분의 OS에서는 두 종류의 시각을 기록하고 있다.\n그중 \u003Cem\u003Ewall clock\u003C\u002Fem\u003E은 말 그대로 현재 시각에 대응하는 것이며, \u003Cem\u003Emonotonic clock\u003C\u002Fem\u003E은 컴퓨터가 켜진 시각으로부터 얼마만큼 시간이 흘렀는지를 의미한다.\n두 종류의 시각을 기록하는 이유는, wall clock이 일정하게 증가하는 것이 아니기 때문이다.\n서머타임(Daylight Saving Time), 윤초(leap seconds), Network Time Protocol의 업데이트로 인해 wall clock에는 오차가 생길 수 있으며,\n이로 인해 타이머를 실행하거나 경과된 시간을 얻고자 할 때 문제가 생길 수 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E이러한 잠재적인 문제점을 해결하기 위해, Go에서는 \u003Ccode\u003Etime.Now()\u003C\u002Fcode\u003E로 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 인스턴스가 생성되거나 타이머가 설정될 때\nmonotonic time을 사용하여 경과 시간을 추적한다.\n\u003Ccode\u003ESub()\u003C\u002Fcode\u003E 메소드는 두 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 인스턴스가 모두 monotonic time이 설정된 경우, monotonic time을 이용하여 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E을 계산한다.\n만약 그렇지 않다면 \u003Ccode\u003ESub()\u003C\u002Fcode\u003E 메소드는 인스턴스에 지정된 시간을 사용하여 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E을 계산한다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"timers-and-timeout\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#timers-and-timeout\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ETimers and Timeout\u003C\u002Fh3\u003E\n\u003Cp\u003E앞선 포스트에서 다루었듯, \u003Ccode\u003Etime\u003C\u002Fcode\u003E 패키지에는 채널을 리턴하여 일정 시간이 지난 후 값이 출력되는 함수가 내장되어 있다.\n\u003Ccode\u003Etime.After()\u003C\u002Fcode\u003E 함수는 일정 시간이 지나면 값이 단 한번 출력되는 채널을 리턴한다.\n반면 \u003Ccode\u003Etime.Tick()\u003C\u002Fcode\u003E 함수에서 리턴되는 채널은 파라미터로 넘어온 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E 만큼의 시간이 흐를 때마다 값이 출력된다.\n이러한 함수들은 시간 초과 및 반복 작업을 가능하게 함으로써 Go의 동시성을 지원한다.\u003C\u002Fp\u003E\n\u003Cp\u003E다만 \u003Ccode\u003ETime.Tick()\u003C\u002Fcode\u003E 함수는 멈출 수 없고, 따라서 가비지 컬렉터에 의해 정리되지도 않는다.\n그래서 \u003Ccode\u003ETime.NewTicker()\u003C\u002Fcode\u003E를 사용하는데 이 함수는 채널을 닫거나 간격을 재설정하는 메소드를 함께 제공하니, 되도록 이 쪽을 선택하는 게 좋을 것 같다.\u003C\u002Fp\u003E\n\u003Cp\u003E위 함수들을 사용하는 예제가 따로 없길래 대충 짜보았다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tdura \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\n\ttimer \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewTicker\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edura\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Edefer\u003C\u002Fspan\u003E timer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EStop\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F shutdown ticker\u003C\u002Fspan\u003E\n\tafter \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EAfter\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edura \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\ttime\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EAfterFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edura\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"응애\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\nloop1\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Eselect\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Ecase\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;-\u003C\u002Fspan\u003Etimer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EC\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F channel that listens ticking\u003C\u002Fspan\u003E\n\t\t\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"야옹\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\ttimer\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EReset\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edura \u003Cspan class=\"token operator\"\u003E\u002F\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token comment\"\u003E\u002F\u002F reconfirguration tick interval\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Ecase\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&lt;-\u003C\u002Fspan\u003Eafter\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n\t\t\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"끝\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"token keyword\"\u003Ebreak\u003C\u002Fspan\u003E loop1\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch2 id=\"encodingjson\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#encodingjson\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Eencoding\u002Fjson\u003C\u002Fh2\u003E\n\u003Chr\u003E\n\u003Cp\u003EREST API는 JSON을 주고받는 통신을 한다. 따라서 Go의 표준 라이브러리는 JSON과 Go 데이터 타입의 상호 변환을 지원한다.\n\u003Cem\u003Emarshaling\u003C\u002Fem\u003E이란 Go 데이터 타입에서 인코딩된 JSON으로 변환하는 것을 의미하며, \u003Cem\u003Eunmarshaling\u003C\u002Fem\u003E이란 그 반대를 의미한다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"use-struct-tags-to-add-metadata\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#use-struct-tags-to-add-metadata\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EUse Struct Tags to Add Metadata\u003C\u002Fh3\u003E\n\u003Cp\u003E우리가 주문 관리 시스템을 만들고 있다고 가정하고, 아래 JSON 파일을 확인해보자.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token property\"\u003E\"id\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"12345\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token property\"\u003E\"date_ordered\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"2020-05-01T13:01:02Z\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token property\"\u003E\"customer_id\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"3\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token property\"\u003E\"items\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"id\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"xyz123\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"name\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Thing 1\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"id\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"abc789\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"name\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Thing 2\"\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E이제 이 타입과 대응되는 타입을 정의해 보자.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Order \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tID          \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E    \u003Cspan class=\"token string\"\u003E&#96;json:\"id\"&#96;\u003C\u002Fspan\u003E\n\tDateOrdered time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ETime \u003Cspan class=\"token string\"\u003E&#96;json:\"date_ordered\"&#96;\u003C\u002Fspan\u003E\n\tCustomerID  \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E    \u003Cspan class=\"token string\"\u003E&#96;json:\"customer_id\"&#96;\u003C\u002Fspan\u003E\n\tItems       \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003EItem    \u003Cspan class=\"token string\"\u003E&#96;json:\"items\"&#96;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Item \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tID   \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E&#96;json:\"id\"&#96;\u003C\u002Fspan\u003E\n\tName \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E&#96;json:\"name\"&#96;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EJSON으로 변환되는 struct임을 명시하기 위해서는 구조체에 필드를 입력해준 뒤 struct tag를 입력해줘야 한다.\nstruct tag는 backtick(\u003Ccode\u003E`\u003C\u002Fcode\u003E)으로 문자열을 감싸는 구조이지만, 한 줄 이상 이어서 작성할 수 없다.\nstruct tag는 한 개 이상의 tag\u002Fvalue 쌍으로 이루어져 있으며, \u003Ccode\u003EtagName: &quot;tagValue&quot;\u003C\u002Fcode\u003E의 구조로 작성되며 공백으로 구분한다.\u003C\u002Fp\u003E\n\u003Cp\u003Estruct tag는 그냥 문자열이기 때문에, 컴파일러는 얘네가 제대로 작성되어 있는지 알 수가 없다.\n다만 \u003Ccode\u003Ego vet\u003C\u002Fcode\u003E 명령어를 치면 검증할 수 있으며, 이러한 모든 필드들은 export된다.\n다른 패키지와 마찬가지로, \u003Ccode\u003Eencoding\u002Fjson\u003C\u002Fcode\u003E 패키지의 코드들은 구조체의 export되지 않은 필드에 접근할 수 없다.\u003C\u002Fp\u003E\n\u003Cp\u003EJSON을 처리하기 위해서는 태그명을 \u003Ccode\u003Ejson\u003C\u002Fcode\u003E으로 지어서 구조체 필드와 연결되어야 하는 JSON 필드의 이름을 지정해주어야 한다.\n만약 \u003Ccode\u003Ejson\u003C\u002Fcode\u003E 태그를 지정하지 않으면 기본적으로 JSON 객체의 필드명과 구조체의 필드명을 매칭시킨다.\n하지만 실제로는 필드명이 같다고 하더라도 struct tag를 명시해주는 것이 좋다.\u003C\u002Fp\u003E\n\u003Cp\u003EJSON을 구조체로 \u003Cem\u003Eunmarshaling\u003C\u002Fem\u003E할 때 \u003Ccode\u003Ejson\u003C\u002Fcode\u003E 태그가 명시되어있지 않으면, 필드가 매칭될때 대소문자를 구분하지 않는다.\n반대로 구조체를 JSON으로 \u003Cem\u003Emarshaling\u003C\u002Fem\u003E할 때 구조체 필드가 export되려면 첫 글자가 대문자일 수 밖에 없기 때문에, JSON 태그도 항상 대문자가 된다.\u003C\u002Fp\u003E\n\u003Cp\u003E만약 \u003Cem\u003Emarshaling\u003C\u002Fem\u003E 또는 \u003Cem\u003Eunmarshaling\u003C\u002Fem\u003E을 할 때 무시해야 하는 필드가 있다면 필드명으로 대시(\u003Ccode\u003E-\u003C\u002Fcode\u003E)를 써주면 된다.\n만약 필드가 비어있을 때 출력에서 제외되어야 하는 경우, 이름 뒤에 \u003Ccode\u003E,omitempty\u003C\u002Fcode\u003E를 추가한다.\n이 때 필드가 비어있다는 것은 Zero value를 의미하는 것이 아니라, zero-length slice나 map 등이 이에 해당한다.\u003C\u002Fp\u003E\n\u003Cp\u003Estruct tag는 메타데이터를 사용하여 프로그램의 행동을 제어할 수 있게 해준다.\nJava와 같은 다른 언어에서는 개발자들이 프로그램 요소에 주석을 달아\n프로그램이 \u003Cem\u003E어떤\u003C\u002Fem\u003E 처리를 하는 것에 대해 기술하는 것보다는 \u003Cem\u003E어떻게\u003C\u002Fem\u003E 처리되어야 할지 설명하도록 장려한다.\u003C\u002Fp\u003E\n\u003Cp\u003EJava에서 주석을 달던 사람들은 무언가 잘못됐을 때, 특히 어떤 코드가 주석이 달려있음에도 어떤 역할을 하는지 이해하지 못할 때 당황하는 경향이 있다.\nGo에서는 짧은 코드보단 명시적인 코드를 좋아한다.\nstruct tag는 자동으로 evaluate되지 않으며, 구조체 인스턴스가 함수로 전달될 때 처리된다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"unmarshaling-and-marshaling\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#unmarshaling-and-marshaling\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EUnmarshaling and Marshaling\u003C\u002Fh3\u003E\n\u003Chr\u003E\n\u003Cp\u003E\u003Ccode\u003Eencoding\u002Fjson\u003C\u002Fcode\u003E 패키지의 \u003Ccode\u003Ejson.Unmarshal()\u003C\u002Fcode\u003E 함수는 \u003Ccode\u003Ebyte\u003C\u002Fcode\u003E의 \u003Ccode\u003Eslice\u003C\u002Fcode\u003E를 \u003Ccode\u003Estruct\u003C\u002Fcode\u003E로 변환해준다.\n아래 예제는 \u003Ccode\u003Edata\u003C\u002Fcode\u003E라는 문자열 변수를 \u003Ccode\u003Estruct\u003C\u002Fcode\u003E를 위에서 확인한 \u003Ccode\u003EOrder\u003C\u002Fcode\u003E 구조체 타입으로 변환하는 예제이다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Edata \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E&#96;&#123;\n\t\"id\":\"12345\",\n\t\"date_ordered\":\"2020-05-01T13:01:02Z\",\n\t\"customer_id\":\"3\",\n\t\"items\":[&#123;\"id\":\"xyz123\",\"name\":\"Thing 1\"&#125;,&#123;\"id\":\"abc789\",\"name\":\"Thing 2\"&#125;]\n&#125;&#96;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E o Order\nerr \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E json\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EUnmarshal\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003Eo\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\nfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eo\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003Ejson.Unmarshal()\u003C\u002Fcode\u003E 함수는 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E처럼 데이터를 입력 파라미터에 생성한다.\n이는 두 가지 이유가 있는데, 첫 번째는 쉽게 예상할 수 있듯 동일한 구조체를 재사용하여 효율적으로 메모리를 사용할 수 때문이다.\n두 번째는 달리 다른 방법이 없기 때문이다.\nGo에는 제네릭이 없기 때문에, 인스턴스로 만들 구조체의 타입을 지정할 방법이 달리 없다.\n만약 Go에도 제네릭이 생긴다 해도, 메모리 사용의 이점때문에 이 방식이 그대로 사용되리라 예상된다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E\u003Ccode\u003Eencoding\u002Fjson\u003C\u002Fcode\u003E 패키지의 \u003Ccode\u003Ejson.Marshal()\u003C\u002Fcode\u003E 함수는 구조체 인스턴스를 다시 \u003Ccode\u003Ebyte\u003C\u002Fcode\u003E의 \u003Ccode\u003Eslice\u003C\u002Fcode\u003E인 JSON으로 변환해준다.\n\u003Ccode\u003Ejson.Marshal()\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\tout\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E json\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EMarshal\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eo\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eout\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"json-readers-and-writers\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#json-readers-and-writers\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EJSON, Readers, and Writers\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003Ejson.Marshal()\u003C\u002Fcode\u003E와 \u003Ccode\u003Ejson.Unmarshal()\u003C\u002Fcode\u003E 함수는 \u003Ccode\u003E[]byte\u003C\u002Fcode\u003E를 사용한다.\n또한 대부분의 데이터 소스와 싱크가 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E와 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E 인터페이스를 충족시키는 것을 알고 있다.\n그래서 \u003Ccode\u003Eioutil.ReadAll()\u003C\u002Fcode\u003E을 통해 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E의 모든 내용을 \u003Ccode\u003E[]byte\u003C\u002Fcode\u003E에 저장하여 \u003Ccode\u003Ejson.Unmarshal()\u003C\u002Fcode\u003E을 사용할 수 있지만, 이 방식은 비효율적이다.\n비슷하게 \u003Ccode\u003Ejson.Marshal()\u003C\u002Fcode\u003E 함수를 통해 인메모리 \u003Ccode\u003E[]byte\u003C\u002Fcode\u003E 버퍼에 값을 쓰고, 해당 버퍼의 데이터를 네티워크나 디스크에 쓸 수 있다.\n다만 그 경우 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E에 직접 데이터를 쓰는 편이 더 효율적일 것이다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Eencoding\u002Fjson\u003C\u002Fcode\u003E 이러한 상황을 다루기 위한 두 가지 타입을 포함하고 있다.\n바로 \u003Ccode\u003Ejson.Decoder\u003C\u002Fcode\u003E와 \u003Ccode\u003Ejson.Encoder\u003C\u002Fcode\u003E 타입이며, 이 타입들은 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E, \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E 인터페이스를 충족시키면서 읽기\u002F쓰기를 할 수 있게 해준다.\n간단한 예제를 확인해보자.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Person \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tName \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E&#96;json:\"name\"&#96;\u003C\u002Fspan\u003E\n\tAge  \u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E    \u003Cspan class=\"token string\"\u003E&#96;json:\"age\"&#96;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\ntoFile \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E Person\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tName\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Fred\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\tAge\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E  \u003Cspan class=\"token number\"\u003E40\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003E\u003Ccode\u003Eos.File\u003C\u002Fcode\u003E 타입은 \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E와 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E 인터페이스를 모두 충족시키기 때문에, \u003Ccode\u003Ejson.Decoder\u003C\u002Fcode\u003E와 \u003Ccode\u003Ejson.Encodeer\u003C\u002Fcode\u003E를 시연하는 데 사용해보자.\n먼저 임시 파일 인스턴스를 만들어 \u003Ccode\u003Ejson.NewEncoder()\u003C\u002Fcode\u003E 함수에 넘기면, 임시 파일에 대한 \u003Ccode\u003Ejson.Encoder\u003C\u002Fcode\u003E 인스턴스를 생성한다.\n그 후 \u003Ccode\u003EEncode()\u003C\u002Fcode\u003E 메소드를 호출할 때 \u003Ccode\u003EtoFile\u003C\u002Fcode\u003E을 넘기면 된다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003EtmpFile\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E ioutil\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ETempFile\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eos\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ETempDir\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"sample-\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Edefer\u003C\u002Fspan\u003E os\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ERemove\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EtmpFile\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\nerr \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E json\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewEncoder\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EtmpFile\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EEncode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EtoFile\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nerr \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E tmpFile\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EClose\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003E이렇게 \u003Ccode\u003EtoFile\u003C\u002Fcode\u003E을 임시 파일에 쓴 후 임시 파일을 다시 읽어들여서 \u003Ccode\u003Ejson.NewDecoder()\u003C\u002Fcode\u003E로 보내고,\n\u003Ccode\u003EDecode()\u003C\u002Fcode\u003E 메소드를 호출하여 \u003Ccode\u003EPerson\u003C\u002Fcode\u003E 타입의 변수로 불러올 것이다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003EtmpFile2\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E os\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EOpen\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EtmpFile\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EName\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E fromFile Person\nerr \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E json\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewDecoder\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EtmpFile2\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EDecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003EfromFile\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nerr \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E tmpFile2\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EClose\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\nfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintf\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"%+v&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E fromFile\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E전체 예제는 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjunhyuk0801\u002FLearning-golang\u002Fblob\u002Fmaster\u002F11-standard_library\u002Fjson\u002Fwriter_reader.go\" rel=\"nofollow\"\u003E여기\u003C\u002Fa\u003E서 확인할 수 있다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"encoding-and-decoding-json-streams\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#encoding-and-decoding-json-streams\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EEncoding and Decoding JSON Streams\u003C\u002Fh3\u003E\n\u003Cp\u003E여러 개의 JSON 구조체를 한 번에 읽거나 쓰려면 어떻게 해야 할까?\n이런 상황에서도 \u003Ccode\u003Ejson.Decoder\u003C\u002Fcode\u003E와 \u003Ccode\u003Ejson.Encoder\u003C\u002Fcode\u003E를 사용할 수 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E아래와 같은 데이터가 있다고 해보자.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"name\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Fred\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"age\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E40\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"name\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Mary\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"age\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E21\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"name\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Pat\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token property\"\u003E\"age\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E30\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E우리의 예제에서 이 데이터는 \u003Ccode\u003Edata\u003C\u002Fcode\u003E라는 문자열로 저장되어 있다고 가정할 것이다.\n다만 실제로 이 데이터는 파일이나 HTTP 요청의 데이터일 수도 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E이 데이터를 \u003Ccode\u003Et\u003C\u002Fcode\u003E라는 구조체의 타입의 인스턴스로 만들 것이다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E t \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tName \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E&#96;json:\"name\"&#96;\u003C\u002Fspan\u003E\n\tAge  \u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E    \u003Cspan class=\"token string\"\u003E&#96;json:\"age\"&#96;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003E이전처럼 \u003Ccode\u003Ejson.Decoder\u003C\u002Fcode\u003E를 데이터 소스로 초기화할 것이다.\n다만 이번에는 \u003Ccode\u003Ejson.Decoder\u003C\u002Fcode\u003E의 \u003Ccode\u003EMore()\u003C\u002Fcode\u003E 메소드를 \u003Ccode\u003Efor\u003C\u002Fcode\u003E 루프 조건으로 사용할 것이다.\n이렇게 하면 한 번에 한 개의 JSON 객체를 데이터로 읽어올 수 있게 된다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Edec \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E json\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewDecoder\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Estrings\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewReader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E dec\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EMore\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\terr \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E dec\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EDecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003Et\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\tfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Et\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E이 예제의 데이터 스트림에는 배열로 감싸지지 않은 여러 개의 JSON 객체들이 있다.\n이들을 메모리에 한 번에 로드하지 않고, 위 예제처럼 \u003Ccode\u003Ejson.Decoder\u003C\u002Fcode\u003E로 단일 객체를 한 개씩 읽으면\n성능이 향상되고 메모리 사용량이 줄어든다는 장점이 있다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E\u003Ccode\u003Ejson.Encoder\u003C\u002Fcode\u003E로 여러 개의 값을 쓰는 것은 한 개의 값을 쓰는 것과 유사하다.\n예제에서는 \u003Ccode\u003Ebytes.Buffer\u003C\u002Fcode\u003E에 값을 쓸 것이지만, \u003Ccode\u003Eio.Writer\u003C\u002Fcode\u003E 인터페이스를 충족시킨다면 어느 타입이든 사용할 수 있다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E allInputs \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003EPerson\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EName\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Fred\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E Age\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E40\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EName\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Mary\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E Age\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E21\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EName\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Pat\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E Age\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E30\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E b bytes\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EBuffer\nenc \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E json\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewEncoder\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003Eb\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003E_\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E input \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Erange\u003C\u002Fspan\u003E allInputs \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tt \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eprocess\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Einput\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\terr \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E enc\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EEncode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Et\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\nout \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E b\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EString\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\nfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eout\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"custon-json-parsing\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#custon-json-parsing\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECuston JSON Parsing\u003C\u002Fh3\u003E\n\u003Cp\u003EJSON 파싱 라이브러리의 기본적인 기능으로도 사용하는 데 문제는 없겠지만, 종종 오버라이드하여 사용해야할 때도 있을 것이다.\n\u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E은 RFC339 포맷은 기본적으로 JSON에서 RFC339 포맷을 사용하는데, 다른 시간 포맷을 사용해야 할 수도 있다.\n그러한 경우 \u003Ccode\u003Ejson.Marshaler\u003C\u002Fcode\u003E와 \u003Ccode\u003Ejson.Unmarshaler\u003C\u002Fcode\u003E 인터페이스를 충족시키는 새로운 타입을 생성하면 된다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E RFC822ZTime \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\ttime\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ETime\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ert RFC822ZTime\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EMarshalJSON\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tout \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E rt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ETime\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EFormat\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Etime\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERFC822Z\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E&#96;\u003Cspan class=\"token string\"\u003E\"&#96; + out + &#96;\"\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E&#96;), nil\n&#125;\n\nfunc (rt *RFC822ZTime) UnmarshalJSON(b []byte) error &#123;\n\tif string(b) == \"null\" &#123;\n\t\treturn nil\n\t&#125;\n\n\tt, err := time.Parse(&#96;\u003C\u002Fspan\u003E\"\u003Cspan class=\"token string\"\u003E&#96;+time.RFC822Z+&#96;\u003C\u002Fspan\u003E\"&#96;\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eb\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E err\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\t\u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ert \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E RFC822ZTime\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003Et\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E 구조체 타입을 \u003Ccode\u003ERFC822ZTime\u003C\u002Fcode\u003E 타입에 Embedding하였기 때문에 기존 \u003Ccode\u003Etime.Time\u003C\u002Fcode\u003E의 메소드에 접근할 수 있다.\n또한 value receiver로 선언된 \u003Ccode\u003EMarshalJSON()\u003C\u002Fcode\u003E 메소드에서는 시간 값을 읽기만 하지만,\npointer receiver로 선언된 \u003Ccode\u003EUnmarshalJSON()\u003C\u002Fcode\u003E 메소드에서는 시간 값을 변경한다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E이렇게 하여, 앞선 예제의 \u003Ccode\u003EOrder\u003C\u002Fcode\u003E 타입의 \u003Ccode\u003EDateOrdered\u003C\u002Fcode\u003E 필드를 RFC822 포맷으로 사용 가능하게끔 수정해주었다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Item \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tID   \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E&#96;json:\"id\"&#96;\u003C\u002Fspan\u003E\n\tName \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E&#96;json:\"name\"&#96;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Order \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tID           \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E      \u003Cspan class=\"token string\"\u003E&#96;json:\"id\"&#96;\u003C\u002Fspan\u003E\n\tDateOrdereds RFC822ZTime \u003Cspan class=\"token string\"\u003E&#96;json:\"date_ordered\"&#96;\u003C\u002Fspan\u003E\n\tCustomerID   \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E      \u003Cspan class=\"token string\"\u003E&#96;json:\"customer_id\"&#96;\u003C\u002Fspan\u003E\n\tItems        \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003EItem      \u003Cspan class=\"token string\"\u003E&#96;json:\"items\"&#96;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E전체 예제는 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fjunhyuk0801\u002FLearning-golang\u002Fblob\u002Fmaster\u002F11-standard_library\u002Fjson\u002Fcuston_parsing.go\" rel=\"nofollow\"\u003E여기\u003C\u002Fa\u003E서 확인할 수 있다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E사실 이러한 방식에는 원칙적으로는 문제가 있다.\n우리는 JSON에 작성된 날짜 포맷을 날짜 자료구조 필드값으로 변환하는데, 이는 \u003Ccode\u003Eencoding\u002Fjson\u003C\u002Fcode\u003E 방식의 단점이다.\n\u003Ccode\u003ERFC822ZTime\u003C\u002Fcode\u003E가 아닌 \u003Ccode\u003EOrder\u003C\u002Fcode\u003E타입이 \u003Ccode\u003Ejson.Marshaler\u003C\u002Fcode\u003E나 \u003Ccode\u003Ejson.Unmarshaler\u003C\u002Fcode\u003E 인터페이스를 충족시키게끔 할 수도 있었을 것이다.\n다만 그렇게 하면 모든 필드를 직접 처리하도록 코드를 작성해주어야 한다. 직접 처리할 필요가 없는 필드에 대해서도 말이다.\nstruct tag는 함수가 특정 필드만 파싱하도록 명시할 수 없기 때문에, 필드에 대한 타입을 직접 생성해주어야 하는 것이다.\u003C\u002Fp\u003E\n\u003Cp\u003EJSON을 파싱하는 코드의 양을 제한하려면 두 개의 각기 다른 구조체를 정의해야 한다.\n하나는 JSON으로 변환하거나 변환되는 것이며, 다른 하나는 데이터 처리에 관련된 것이다.\n읽기를 할 때는 JSON을 JSON 인식 유형으로 읽은 다음, 이를 다른 유형으로 복사한다.\n반면 JSON으로 쓰기를 하려면 이를 반대로 해주면 된다.\n이 방식은 코드에 중복성이 생기기는 하지만, 비즈니스 로직이 통신 프로토콜에 의존하는 것을 방지해준다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ejson.Marshal()\u003C\u002Fcode\u003E이나 \u003Ccode\u003Ejson.Unmarshal()\u003C\u002Fcode\u003E 함수에 \u003Ccode\u003Emap[string]interface{}\u003C\u002Fcode\u003E 타입을 파라미터로 보낼 수도 있다.\n다만 이는 JSON에 무엇이 저장되어 있는지 확인하는 용도로만 쓰고, 확인한 이후에는 concrete type으로 변환해주는 것이 좋다.\nGo에서 타입은 그 자체로 처리할 데이터에 대한 문서 역할도 하니 말이다.\u003C\u002Fp\u003E\n\u003Cp\u003EGo의 표준 라이브러리는 JSON뿐만 아니라 XML, Base64 등, 다양한 인코더와 디코더를 제공한다.\n만약 인코딩해야 할 데이터 포맷이 있는데 이를 지원하는 표준 또는 서드 파티 라이브러리를 찾을 수 없다면, 직접 작성해주어야 한다.\n직접 작성하는 법은 \u003Cem\u003EReflection\u003C\u002Fem\u003E을 다루는 포스트에서 추후 다룰 예정이다.\u003C\u002Fp\u003E\n\u003Cblockquote\u003E\u003Cp\u003E표준 라이브러리 중 \u003Ccode\u003Eencoding\u002Fgob\u003C\u002Fcode\u003E 패키지는 Go의 바이너리 데이터 인코딩으로, Java의 serialization이랑 비슷하다.\nJava serialization을 Java RMI나 Enterprise Java Beans에서 사용하는 것처럼,\n\u003Ccode\u003Egob\u003C\u002Fcode\u003E 프로토콜은 Go의 RPC(\u003Ccode\u003Enet\u002Frpc\u003C\u002Fcode\u003E 패키지)에서 사용하는 프로토콜이다.\n다만 \u003Ccode\u003Eencoding\u002Fgob\u003C\u002Fcode\u003E나 \u003Ccode\u003Enet\u002Frpc\u003C\u002Fcode\u003E 둘 다 사용하지 않는 것을 권장한다.\n특정 언어에 구애되지 않는 gRPC라는 좋은 프로토콜이 있다.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch2 id=\"nethttp\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#nethttp\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003Enet\u002Fhttp\u003C\u002Fh2\u003E\n\u003Chr\u003E\n\u003Cp\u003EGo에는 HTTP\u002F2 클라이언트 및 서버를 작성하는 표준 라이브러리가 있다.\n클라이언트 및 서버의 코드 작성 예를 알아보자.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"the-client\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#the-client\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EThe Client\u003C\u002Fh3\u003E\n\u003Cp\u003E\u003Ccode\u003Enet\u002Fhttp\u003C\u002Fcode\u003E 패키지에는 http request를 생성하고 http response를 받는, \u003Ccode\u003EClient\u003C\u002Fcode\u003E 타입이 정의되어 있다.\n\u003Ccode\u003Enet\u002Fhttp\u003C\u002Fcode\u003E에 정의된 가장 기본적인 클라이언트 인스턴스(\u003Ccode\u003EDefaultClient\u003C\u002Fcode\u003E)가 있지만, 릴리즈될 어플리케이션에서는 이를 사용하지 않는 것이 좋다.\n기본적으로 \u003Ccode\u003EDefaultClient\u003C\u002Fcode\u003E에는 타임아웃이 없다. 따라서 직접 인스턴스 하나를 생성해 주는 것이 좋다.\n기억해야 할 점은 프로그램 전체에서 단 한 개의 \u003Ccode\u003Ehttp.Client\u003C\u002Fcode\u003E 인스턴스만 생성하면,\n여러 개의 고루틴이 돌아간다고 해도 요청들을 충분히 처리할 수 있다는 것이다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Eclient \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EClient\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E10\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003E새로운 요청을 생성하려면 \u003Ccode\u003Ehttp.NewRequsetWithContext()\u003C\u002Fcode\u003E 함수에 context, requset method, URL을 넘겨서 \u003Ccode\u003E*http.Requset\u003C\u002Fcode\u003E 인스턴스를 생성해준다.\n만약 request method가 \u003Ccode\u003EPUT\u003C\u002Fcode\u003E, \u003Ccode\u003EPOST\u003C\u002Fcode\u003E, \u003Ccode\u003EPATCH\u003C\u002Fcode\u003E라면, 마지막 파라미터로 \u003Ccode\u003Eio.Reader\u003C\u002Fcode\u003E 타입의 request body를 작성해줘야 한다.\n만약 request body가 없다면, \u003Ccode\u003Enil\u003C\u002Fcode\u003E을 쓰면 된다.\u003C\u002Fp\u003E\n\u003Cp\u003E또한 이렇게 생성한 \u003Ccode\u003E*http.Requset\u003C\u002Fcode\u003E 인스턴스의 \u003Ccode\u003EHeader\u003C\u002Fcode\u003E 필드의 메소드들을 호출하여 request header를 설정할 수 있다.\n아래 예제에서는 \u003Ccode\u003EAdd()\u003C\u002Fcode\u003E 메소드로 request header를 추가해주었다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Ereq\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewRequestWithContext\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n\tcontext\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EBackground\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\thttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EMethodGet\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token string\"\u003E\"https:\u002F\u002Fjsonplaceholder.typicode.com\u002Ftodos\u002F1\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\nreq\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHeader\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EAdd\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"X-My-Client\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Learning Go\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003E\u003Ccode\u003E*http.Requset\u003C\u002Fcode\u003E 인스턴스의 설정을 마쳤다면, 이제 요청을 전송해보자.\n\u003Ccode\u003Ehttp.Client\u003C\u002Fcode\u003E의 \u003Ccode\u003EDo()\u003C\u002Fcode\u003E 메소드를 호출하면 요청이 전송되고, 요청에 대한 응답에 해당하는 \u003Ccode\u003Ehttp.Response\u003C\u002Fcode\u003E 인스턴스를 리턴 값으로 받을 것이다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Eres\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E client\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EDo\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ereq\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003E이렇게 전송받은 \u003Ccode\u003Ehttp.Response\u003C\u002Fcode\u003E 인스턴스의 필드값들은 요청에 대한 정보를 담고 있다.\nresponse status code는 \u003Ccode\u003EStatusCode\u003C\u002Fcode\u003E 필드에 저장되며, response status message는 \u003Ccode\u003EStatus\u003C\u002Fcode\u003E 필드에 저장된다.\n또한 response header는 \u003Ccode\u003EHeader\u003C\u002Fcode\u003E 필드에, response body는 \u003Ccode\u003EBody\u003C\u002Fcode\u003E 필드에 \u003Ccode\u003Eio.ReadCloser\u003C\u002Fcode\u003E 타입으로 저장된다.\n따라서 \u003Ccode\u003Ejson.Decoder\u003C\u002Fcode\u003E를 이용해서 REST API 응답을 처리할 수 있다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Edefer\u003C\u002Fspan\u003E res\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EBody\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EClose\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E res\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EStatusCode \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EStatusOK \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Efmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESprintf\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"unexpected status: got %v\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E res\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EStatus\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\nfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eres\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHeader\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EGet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Content-Type\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E data \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tUserID    \u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E    \u003Cspan class=\"token string\"\u003E&#96;json:\"userId\"&#96;\u003C\u002Fspan\u003E\n\tID        \u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E    \u003Cspan class=\"token string\"\u003E&#96;json:\"id\"&#96;\u003C\u002Fspan\u003E\n\tTitle     \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E&#96;json:\"title\"&#96;\u003C\u002Fspan\u003E\n\tCompleted \u003Cspan class=\"token builtin\"\u003Ebool\u003C\u002Fspan\u003E   \u003Cspan class=\"token string\"\u003E&#96;json:\"completed\"&#96;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\nerr \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E json\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewDecoder\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eres\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EBody\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EDecode\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003Edata\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\nfmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintf\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"%+v&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E위 예제의 실행 결과는 다음과 같다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-bash\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-bash\"\u003Eapplication\u002Fjson\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E \u003Cspan class=\"token assign-left variable\"\u003Echarset\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003Eutf-8\n\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003EUserID:1 ID:1 Title:delectus aut autem Completed:false\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cblockquote\u003E\u003Cp\u003E\u003Ccode\u003Enet\u002Fhttp\u003C\u002Fcode\u003E 패키지에는 \u003Ccode\u003Ehttp.Get()\u003C\u002Fcode\u003E, \u003Ccode\u003Ehttp.Head()\u003C\u002Fcode\u003E, \u003Ccode\u003Ehttp.Post()\u003C\u002Fcode\u003E등 요청을 보내는 함수가 있다.\n이 함수들은 \u003Ccode\u003EDefaultClient\u003C\u002Fcode\u003E로 요청을 보내기 때문에 사용하지 않는 것이 좋다(얘네 타임아웃이 없다).\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"the-server\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#the-server\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EThe Server\u003C\u002Fh3\u003E\n\u003Cp\u003EHTTP 서버는 \u003Ccode\u003Ehttp.Server\u003C\u002Fcode\u003E와 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E 인터페이스의 개념에 기반하여 구축한다.\n\u003Ccode\u003Ehttp.Client\u003C\u002Fcode\u003E는 http request를 전송하는 역할을 하듯, \u003Ccode\u003Ehttp.Server\u003C\u002Fcode\u003E는 TLS를 지원하며, http request를 핸들링하는 성능 좋은 HTTP\u002F2 서버이다.\u003C\u002Fp\u003E\n\u003Cp\u003E서버에 대한 요청은 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E 인터페이스를 충족시키는 타입에 의해 핸들링된다.\n이 인터페이스는 단일 메소드를 정의한다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E Handler \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003EServeHTTP\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003E\u003Ccode\u003EServeHTTP()\u003C\u002Fcode\u003E의 파라미터 중 \u003Ccode\u003E*http.Request\u003C\u002Fcode\u003E는 \u003Ccode\u003Ehttp.Client\u003C\u002Fcode\u003E로 요청을 보낼 때 사용했던 타입과 동일한 것이다.\n\u003Ccode\u003Ehttp.ResponseWriter\u003C\u002Fcode\u003E 인터페이스는 아래처럼 세 개의 메소드를 정의한다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E ResponseWriter \u003Cspan class=\"token keyword\"\u003Einterface\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003EHeader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHeader\n\t\u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token builtin\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token function\"\u003EWriterHeader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EstatusCode \u003Cspan class=\"token builtin\"\u003Eint\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E이 세 개의 메소드는 반드시 일정한 순서대로 호출된다.\u003C\u002Fp\u003E\n\u003Cp\u003E가장 먼저 호출되는 것은 \u003Ccode\u003EHeader()\u003C\u002Fcode\u003E로, \u003Ccode\u003Ehttp.Header\u003C\u002Fcode\u003E 인스턴스를 리턴받아서 response header를 설정하기 위해 사용된다.\n특별히 response header를 설정할 필요가 없다면 \u003Ccode\u003EHeader()\u003C\u002Fcode\u003E를 반드시 호출할 필요는 없다.\u003C\u002Fp\u003E\n\u003Cp\u003E그 다음으로는 response status code를 설정하기 위해 \u003Ccode\u003EWriteHeader()\u003C\u002Fcode\u003E를 호출한다.\n이때 모든 status code는 \u003Ccode\u003Enet\u002Fhttp\u003C\u002Fcode\u003E에 상수로 정의되어 있다.\n(패키지 레벨에서 status code에 대한 특정한 타입이 정의되었으면 좋았을 텐데, 그렇지 않다.\n실제로 status code들은 특별한 타입이 없는 그냥 정수형이다.)\n만약 status code 200을 보내려고 한다면 \u003Ccode\u003EWriteHeader()\u003C\u002Fcode\u003E를 굳이 호출해줄 필요는 없다.\u003C\u002Fp\u003E\n\u003Cp\u003E마지막으로 \u003Ccode\u003EWrite()\u003C\u002Fcode\u003E를 호출하여, response body를 설정해준다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E가장 기본적인 형태의 handler를 작성해보자.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Etype\u003C\u002Fspan\u003E HelloHandler \u003Cspan class=\"token keyword\"\u003Estruct\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ehh HelloHandler\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EServeHTTP\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tw\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello!&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E어차피 구조체의 필드는 그렇게 중요하지 않으니 비워 두었고, 필요한 \u003Ccode\u003EServeHTTP()\u003C\u002Fcode\u003E 메소드만 정의해 주었다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E새로운 \u003Ccode\u003Ehttp.Server\u003C\u002Fcode\u003E 인스턴스를 생성하여, 서버를 열어보자.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Es \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EServer\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tAddr\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E         \u003Cspan class=\"token string\"\u003E\":8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\tReadTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E  \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\tWriteTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\tIdleTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E  \u003Cspan class=\"token number\"\u003E100\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\tHandler\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E      HelloHandler\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\nerr \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E s\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EListenAndServe\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EErrServerClosed \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Ccode\u003Ehttp.Server\u003C\u002Fcode\u003E의 \u003Ccode\u003EAddr\u003C\u002Fcode\u003E 필드는 서버가 열릴 호스트 주소와 포트를 지정한다.\n따로 지정해주지 않으면 모든 호스트 주소에 대해 HTTP 표준 포트인 80으로 서버를 열 것이다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003EReadTimeout\u003C\u002Fcode\u003E, \u003Ccode\u003EWriteTimeout\u003C\u002Fcode\u003E, \u003Ccode\u003EIdleTimeout\u003C\u002Fcode\u003E 필드는 서버의 읽기, 쓰기, 유휴 상태의 타임아웃을 \u003Ccode\u003Etime.Duration\u003C\u002Fcode\u003E값으로 명시할 수 있다.\n기본적으로 타임아웃을 두지 않기 때문에, 이 필드를 지정해주지 않으면 잘못된 요청을 적절히 핸들링하지 못할 것이다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003EHander\u003C\u002Fcode\u003E 필드에 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E를 충족시키는 타입을 지정해주면 된다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E단일 종류의 요청만 받는 서버는 별로 쓸데가 없을 것이다.\nGo 표준 라이브러리에는 요청 라우터인, \u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E를 포함하고 있다.\n\u003Ccode\u003Ehttp.NewServerMux()\u003C\u002Fcode\u003E 함수로 새로운 \u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E 인스턴스를 생성할 수 있으며,\n이는 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E 인터페이스를 충족시키기 때문에 \u003Ccode\u003Ehttp.Server\u003C\u002Fcode\u003E의 \u003Ccode\u003EHandler\u003C\u002Fcode\u003E 필드에 할당될 수 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E또한, \u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E는 요청을 분류할 수 있는 두 개의 메소드를 포함하고 있다.\n첫 번째 메소드는 두 개의 파라미터를 받는 \u003Ccode\u003EHandle()\u003C\u002Fcode\u003E로, 두 개의 파라미터는 각각 주소 경로와 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E 인스턴스이다.\n만약 주소가 일치한다면 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E가 호출될 것이다.\n또 다른 방법은 더 일반적으로 사용하는 \u003Ccode\u003EHandleFunc()\u003C\u002Fcode\u003E 메소드이다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Emux\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandleFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fhello\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tw\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello!&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E이 메소드에서 볼 수 있듯 파라미터로 주소 경로와, \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E의 \u003Ccode\u003EServeHTTP()\u003C\u002Fcode\u003E를 만족시키는 closure를 작성해 주었다.\n해당 패턴은 인터페이스 포스트의 \u003Ca href=\"https:\u002F\u002Flearning.oreilly.com\u002Flibrary\u002Fview\u002Flearning-go\u002F9781492077206\u002Fch07.html#function_type_interface\" rel=\"nofollow\"\u003EFunction Types Are a Bridge to Interfaces\u003C\u002Fa\u003E에서 소개하였으니, 확인할 수 있다.\u003C\u002Fp\u003E\n\u003Cp\u003E다만 핸들러가 다른 비즈니스 로직을 사용하여 더 복잡해질 경우, 구조체 타입에 메소드를 정의하여 사용해주는 것이 좋다.\n이에 관련된 내용도 인터페이스 포스트의 \u003Ca href=\"https:\u002F\u002Flearning.oreilly.com\u002Flibrary\u002Fview\u002Flearning-go\u002F9781492077206\u002Fch07.html#dependency_injection\" rel=\"nofollow\"\u003EImplicit Interfaces Make Dependency Injection Easier\u003C\u002Fa\u003E에서 소개하였다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cblockquote\u003E\u003Cp\u003E\u003Ccode\u003Enet\u002Fhttp\u003C\u002Fcode\u003E에는 패키지 레벨 함수인 \u003Ccode\u003Ehttp.Handle\u003C\u002Fcode\u003E, \u003Ccode\u003Ehttp.HandleFunc\u003C\u002Fcode\u003E, \u003Ccode\u003Ehttp.ListenAndServe\u003C\u002Fcode\u003E, \u003Ccode\u003Ehttp.ListenAndServeTLS\u003C\u002Fcode\u003E 함수가 있으며,\n이들은 \u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E의 패키지 레벨 인스턴스인 \u003Ccode\u003Ehttp.DefaultServeMux\u003C\u002Fcode\u003E를 기준으로 동작한다.\n예상되겠지만, 이 함수들은 릴리즈될 어플리케이션에서는 사용이 권장되지 않는다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Ehttp.Server\u003C\u002Fcode\u003E 인스턴스가 \u003Ccode\u003Ehttp.ListenAndServe\u003C\u002Fcode\u003E나 \u003Ccode\u003Ehttp.ListenAndServeTLS\u003C\u002Fcode\u003E에서 생성되기 때문에, 타임아웃과 같은 설정을 지정해줄 수 없다.\n뿐만 아니라 서드 파티 라이브러리가 \u003Ccode\u003Ehttp.DefaultServeMux\u003C\u002Fcode\u003E에 자체 핸들러를 등록해버릴 수 있기 때문에,\n모든 의존성들을 스캔하지 않고는 이를 알 수 없다.\n어플리케이션이 shared state로 인해 통제되는 상황은 되도록 피해야 한다.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cbr\u003E\n\u003Cp\u003E\u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E는 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E에 요청을 보내고 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E 인터페이스를 충족시키기 때문에,\n여러 관련된 요청에 대한 \u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E 인스턴스를 생성하고, 부모 \u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E에 등록할 수 있다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tperson \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewServeMux\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\tperson\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandleFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fgreet\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tw\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"greetings!&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\tdog \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewServeMux\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\tdog\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandleFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fgreet\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tw\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"good puppy!&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\tmux \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewServeMux\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\tmux\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandle\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fperson\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EStripPrefix\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fperson\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E person\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\tmux\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandle\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fdog\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EStripPrefix\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fdog\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E dog\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\ts \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EServer\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tAddr\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E         \u003Cspan class=\"token string\"\u003E\":8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\tReadTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E  \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\tWriteTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\tIdleTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E  \u003Cspan class=\"token number\"\u003E100\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\tHandler\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E      mux\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\terr \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E s\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EListenAndServe\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EErrServerClosed \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E위 예제의 구조를 이해하는 것이 그렇게 어렵진 않을 것이다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003E\u002Fperson\u002Fgreet\u003C\u002Fcode\u003E로 요청을 보내면 \u003Ccode\u003Eperson\u003C\u002Fcode\u003E에 붙어있는 핸들러로 처리되며,\n\u003Ccode\u003E\u002Fdog\u002Fgreet\u003C\u002Fcode\u003E로 요청을 보내면 \u003Ccode\u003Edog\u003C\u002Fcode\u003E에 붙어있는 핸들러로 처리가 된다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003Eperson\u003C\u002Fcode\u003E과 \u003Ccode\u003Edog\u003C\u002Fcode\u003E를 \u003Ccode\u003Emux\u003C\u002Fcode\u003E에 등록할 때 \u003Ccode\u003Ehttp.StripPrefix()\u003C\u002Fcode\u003E 함수를 사용하여,\n주소에서 \u003Ccode\u003Emux\u003C\u002Fcode\u003E에 의해 이미 처리된 부분을 제거해주었다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"middleware\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#middleware\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EMiddleware\u003C\u002Fh3\u003E\n\u003Cp\u003EHTTP 서버의 또 다른 중요한 요소 중 하나는 로그인 여부 확인, 요청 시간 체크, 요청 헤더 체크 등 여러 동작을 수행하는 것이다.\nGo에서는 이러한 연관된 기능들을 \u003Cem\u003E미들웨어\u003C\u002Fem\u003E를 사용하여 구현한다.\n미들웨어는 특별한 타입을 사용하지 않고, \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E를 파라미터로 받아 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E를 반환하는 함수를 작성하여 사용한다.\n대개 반환된 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E는 \u003Ccode\u003Ehttp.HandlerFunc\u003C\u002Fcode\u003E로 반환될 수 있는 closure가 된다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003E아래 예제에는 두 개의 미들웨어 생성기가 있다.\n하나는 요청의 시간을 재는 것이고, 또 하나는 액세스 제어의 나쁜 예라고 할 수 있다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ERequestTimer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eh http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHandler\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHandler \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandlerFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tstart \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENow\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\th\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EServeHTTP\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\tend \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENow\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\tlog\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EPrintf\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"request time for %s: %v\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EURL\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EPath\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E end\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESub\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Estart\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E securityMsg \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"You didn't give the secret password&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ETerribleSecurityProvider\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Epassword \u003Cspan class=\"token builtin\"\u003Estring\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHandler\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHandler \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eh http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHandler\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHandler \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandlerFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E r\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EHeader\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EGet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"X-Secret-Password\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E password \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\t\tw\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EWriteHeader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EStatusUnauthorized\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\t\tw\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EsecurityMsg\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\t\t\u003Cspan class=\"token keyword\"\u003Ereturn\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\t\th\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EServeHTTP\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E이 두 개의 미들웨어 구현을 보면 미들웨어가 무슨 역할을 하는지 알 수 있을 것이다.\n먼저 연산이나 조건 검사를 하기 위한 셋업을 한 후,\n조건을 만족하지 않으면 보통 미들웨어에서 error status code와 함께 \u003Ccode\u003EWrite()\u003C\u002Fcode\u003E로 출력을 한 후 함수를 리턴한다.\n만약 문제가 없다면, 다음 핸들러의 \u003Ccode\u003EServeHTTP()\u003C\u002Fcode\u003E 메소드를 호출한다.\n그 후 정리 작업을 수행한다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003ETerribleSecurityProvider()\u003C\u002Fcode\u003E는 직접 설정 가능한 미들웨어를 생성하는 예제라고 할 수 있다.\n설정 정보(예제에서는 비밀번호)를 \u003Ccode\u003ETerribleSecurityProvider()\u003C\u002Fcode\u003E의 파라미터로 보내면, 해당 정보를 사용하는 미들웨어를 반환한다.\n다만 closure를 반환하는 closure를 반환하기 때문에(쓰기도 어려움;), 살짝 마음에 걸리는 것이다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cblockquote\u003E\u003Cp\u003E미들웨어 레이어에서의 값의 전달은 context를 통해 이루어진다.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\n\u003Cbr\u003E\n\u003Cp\u003E미들웨어를 연결하여 request handler에 추가해보자.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tterribleSecurity \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003ETerribleSecurityProvider\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"GOPHER\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\tmux \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewServeMux\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\tmux\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandle\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fhello\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EStripPrefix\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fperson\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EterribleSecurity\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ERequestTimer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n\t\thttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandlerFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\tw\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello!&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\ts \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EServer\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\tAddr\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E         \u003Cspan class=\"token string\"\u003E\":8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\tReadTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E  \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\tWriteTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\tIdleTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E  \u003Cspan class=\"token number\"\u003E100\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\tHandler\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E      mux\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\n\terr \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E s\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EListenAndServe\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EErrServerClosed \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\t\t\t\u003Cspan class=\"token function\"\u003Epanic\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eerr\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\t\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E위 예제에서 우리는 \u003Ccode\u003ETerribleSecurityProvider()\u003C\u002Fcode\u003E로부터 미들웨어를 생성하고, 핸들러를 각각의 함수 호출로 감싸주었다.\n구조적으로 \u003Ccode\u003EterribleSecurity()\u003C\u002Fcode\u003E closure가 먼저 호출되고, 그 다음으로 \u003Ccode\u003ERequestTimer\u003C\u002Fcode\u003E, 그 다음으로 원래의 request handler가 호출된다.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E는 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E 인터페이스를 충족시킨다.\n아래처럼 적용하면 미들웨어들을 request router에 등록된 모든 핸들러에 적용할 수 있다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003Emux \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENewServeMux\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\nmux\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandleFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tw\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"greetings!&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\nwrappedMux \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EterribleSecurity\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ERequestTimer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Emux\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\ns \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EServer\u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tAddr\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E         \u003Cspan class=\"token string\"\u003E\":8080\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\tReadTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E  \u003Cspan class=\"token number\"\u003E3\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\tWriteTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E5\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\tIdleTimeout\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E  \u003Cspan class=\"token number\"\u003E100\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003E time\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ESecond\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\tHandler\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E      wrappedMux\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch3 id=\"use-idiomatic-third-party-modules-to-enhance-the-server\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#use-idiomatic-third-party-modules-to-enhance-the-server\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EUse idiomatic third-party modules to enhance the server\u003C\u002Fh3\u003E\n\u003Cp\u003E서버에 서드파티 라이브러리를 사용하여 기능을 개선할 수 있다.\n위 예제에서 보았던 미들웨어의 chain이 마음에 들지 않는다면, alice라는 서드파티 라이브러리를 사용할 수 있다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-go\"\u003E\u003C!-- HTML_TAG_START --\u003E\u003Ccode class=\"language-go\"\u003EhelloHandler \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E \u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E&#123;\u003C\u002Fspan\u003E\n\tw\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EWrite\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ebyte\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Hello!&#92;n\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E&#125;\u003C\u002Fspan\u003E\nchain \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E alice\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ENew\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EterribleSecurity\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E RequestTimer\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EThenFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EhelloHandler\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\nmux\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ehandle\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002Fhello\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E chain\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C!-- HTML_TAG_END --\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003E표준 라이브러리를 사용하여 HTTP 서버를 구축하는 것의 가장 큰 문제점은 \u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E를 request router로 사용한다는 점이다.\n이 request router는 HTTP 메소드나 헤더를 기준으로 구분할 수 없으며, Query parameter도 처리할 수 없다.\n게다가 \u003Ccode\u003E*http.ServeMux\u003C\u002Fcode\u003E 인스턴스가 중첩되면 너무 거대해지기도 한다.\u003C\u002Fp\u003E\n\u003Cp\u003E이를 대체하기 위한 프로젝트는 되게 많은데, 대표적인 게 바로 \u003Ca href=\"https:\u002F\u002Fgithub.com\u002Fgorilla\u002Fmux\" rel=\"nofollow\"\u003Egorilla mux\u003C\u002Fa\u003E와 [https:\u002F\u002Fgithub.com\u002Fgo-chi\u002Fchi]이다.\n이 두 라이브러리가 이상적이라 여겨지는 이유는 \u003Ccode\u003Ehttp.Handler\u003C\u002Fcode\u003E나 \u003Ccode\u003Ehttp.HandlerFunc\u003C\u002Fcode\u003E 인스턴스와 함께 사용할 수 있기 때문이며,\n표준 라이브러리와 잘 어우러질 수 있는 라이브러리를 사용하는 Go의 철학을 보여준다.\n또한 관용적인 미들웨어들을 사용할 수 있으며, 주로 사용되는 미들웨어의 구현체를 제공한다.\u003C\u002Fp\u003E\n\u003Cbr\u003E\u003Cbr\u003E\n\u003Ch2 id=\"references\"\u003E\u003Ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#references\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003EReferences\u003C\u002Fh2\u003E\n\u003Chr\u003E\n\u003Ccenter\u003E\u003Cp\u003E\u003Ca href=\"https:\u002F\u002Flearning.oreilly.com\u002Flibrary\u002Fview\u002Flearning-go\u002F9781492077206\u002F\" rel=\"nofollow\"\u003E\u003Cimg src=\"https:\u002F\u002Flearning.oreilly.com\u002Fcovers\u002Furn:orm:book:9781492077206\u002F400w\u002F\" alt=\"Learning Go Book Cover\"\u003E\u003C\u002Fa\u003E \u003Cbr\u003E\n\u003Ca href=\"https:\u002F\u002Flearning.oreilly.com\u002Flibrary\u002Fview\u002Flearning-go\u002F9781492077206\u002F\" rel=\"nofollow\"\u003EJon Bodner, 『Learning Go』, O’Reilly Media, Inc.\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003C\u002Fcenter\u003E\n\u003Cbr\u003E\u003Cbr\u003E",{"title":3,"date":4,"excerpt":5,"categories":6,"coverImage":8,"coverWidth":9,"coverHeight":10,"slug":11},"표준 라이브러리","2022-09-05T00:00:00.000Z","The Standard Library",[7],"Golang","\u002Fpost_img\u002FGolang_basics\u002Fcover.png",16,9,"Go\u002FGolang Basics\u002FGO11"],"uses":{"params":["post"]}}]}